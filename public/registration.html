<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <script type="module" src="firebase.js"></script> <!-- Link to your JS file -->
</head>
<body>

    <h1>Register</h1>
    <form id="registration-form">
        <input type="email" id="register-email" placeholder="Email" required>
        <input type="password" id="register-password" placeholder="Password" required>
        <input type="text" id="disability-type" placeholder="Disability Type (mental, physical, injury)" required>
        <input type="text" id="disability-name" placeholder="Name of Disability" required>
        <input type="text" id="level-of-disability" placeholder="basic or moderate or severe" required>
        <input type="number" id="age" placeholder="Age" required>
        <select id="gender" required>
            <option value="">Select Gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
        </select>
        <button type="submit">Register</button>
    </form>

    <script type="module">
        import { registerUser } from './firebase.js';

        document.getElementById('registration-form').addEventListener('submit', async function(event) {
            event.preventDefault();

            // Collect form data
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const userData = {
                disabilityType: document.getElementById('disability-type').value,
                disabilityName: document.getElementById('disability-name').value,
                levelOfDisability: document.getElementById('level-of-disability').value,
                age: parseInt(document.getElementById('age').value, 10),
                gender: document.getElementById('gender').value
            };

            try {
                // Log form data to ensure everything is being collected
                console.log("Registering user with data:", { email, password, userData });

                // Call the registerUser function and pass the form data
                await registerUser(email, password, userData);
                alert('Registration successful!');
                window.location.href = 'login.html'; // Redirect to login page after successful registration
            } catch (error) {
                console.error("Registration error:", error); // Log any errors for debugging
                alert(error.message); // Show error to the user
            }
        });
    </script>
</body>
</html>
